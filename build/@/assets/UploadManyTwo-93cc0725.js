import{t as F,r as i,S as B,x as I,j as e,y as p}from"./index-0375175f.js";import{e as s}from"./exportFromJSON-59a1cb7c.js";import{W as P,X as L,Y as O,Z as J,a0 as U,a1 as A,K as M,i as V,n as y}from"./Layout-781e84c8.js";const K=({title:n,totalDoc:h,exportData:a,isDisabled:j,handleSelectFile:N,filename:x,handleRemoveSelectFile:b,handleUploadMultiple:v})=>{const t=F(),c=i.useRef(),[f,o]=i.useState(!1),{loading:w}=i.useContext(B),[d,l]=i.useState({name:"",status:!1}),k=()=>{t.pathname==="/products"&&(l({name:"csv",status:!0}),y.getAllProducts({page:1,limit:h,category:null,title:null,price:0}).then(r=>{o(!1),l({name:"",status:!1}),s({data:r.products,fileName:"products",exportType:s.types.csv})}).catch(r=>{l({name:"",status:!1}),o(!1)})),t.pathname==="/categories"&&s({data:a,fileName:"categories",exportType:s.types.csv}),t.pathname==="/attributes"&&s({data:a,fileName:"attributes",exportType:s.types.csv}),t.pathname==="/coupons"&&s({data:a,fileName:"coupons",exportType:s.types.csv}),t.pathname==="/customers"&&s({data:a,fileName:"customers",exportType:s.types.csv})},C=()=>{t.pathname==="/products"&&(l({name:"json",status:!0}),y.getAllProducts({page:1,limit:h,category:null,title:null,price:0}).then(r=>{o(!1),l({name:"json",status:!0}),s({data:r.products,fileName:"products",exportType:s.types.json})}).catch(r=>{o(!1),l({name:"json",status:!0})})),t.pathname==="/categories"&&s({data:a,fileName:"categories",exportType:s.types.json}),t.pathname==="/attributes"&&s({data:a,fileName:"attributes",exportType:s.types.json}),t.pathname==="/coupons"&&s({data:a,fileName:"coupons",exportType:s.types.json}),t.pathname==="/customers"&&s({data:a,fileName:"customers",exportType:s.types.json})};i.useEffect(()=>{const r=u=>{var g;(g=c==null?void 0:c.current)!=null&&g.contains(u.target)||o(!1)};document.addEventListener("mousedown",r)},[c]);const[E,S]=i.useState(!1),T=r=>{S(u=>!u)},{t:m}=I();return e.jsxs("div",{className:" lg:flex md:flex flex-grow-0",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("div",{ref:c,className:"lg:flex-1 md:flex-1 mr-3 sm:flex-none",children:[(n==="Products"||n==="Attribute"||n==="Extra"||n==="Coupon"||n==="Customers"||n==="Categories")&&e.jsxs("button",{onClick:()=>{o(!f)},className:"border flex justify-center items-center border-gray-300 hover:border-green-400 hover:text-green-400  dark:text-gray-300 cursor-pointer h-10 w-20 rounded-md focus:outline-none",children:[e.jsx(P,{className:"mr-2"}),e.jsx("span",{className:"text-xs",children:m("Export")})]}),f&&e.jsxs("ul",{className:"origin-top-left absolute  w-56 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none z-40",style:{},children:[e.jsx("li",{className:"justify-between font-serif font-medium py-2 pl-4 transition-colors duration-150 hover:bg-gray-100 text-gray-500 hover:text-green-500 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200",children:e.jsx("button",{type:"button",onClick:k,className:"focus:outline-none",children:e.jsxs("span",{className:"flex items-center text-sm",children:[e.jsx(L,{className:"w-4 h-4 mr-3","aria-hidden":"true"}),e.jsxs("span",{children:["Export to CSV",d.name==="csv"&&d.status&&"...."]})]})})}),e.jsx("li",{className:"justify-between font-serif font-medium py-2 pl-4 transition-colors duration-150 hover:bg-gray-100 text-gray-500 hover:text-green-500 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200",children:e.jsx("button",{type:"button",className:"focus:outline-none",onClick:C,children:e.jsxs("span",{className:"flex items-center text-sm",children:[e.jsx(O,{className:"w-4 h-4 mr-3","aria-hidden":"true"}),e.jsxs("span",{children:["Export to JSON",d.name==="json"&&d.status&&"...."]})]})})})]})]}),e.jsx("div",{className:"lg:flex-1 md:flex-1 mr-3  sm:flex-none",children:e.jsxs("button",{onClick:T,className:"border flex justify-center items-center h-10 w-20 hover:text-yellow-400  border-gray-300 dark:text-gray-300 cursor-pointer  py-2 hover:border-yellow-400 rounded-md focus:outline-none",children:[e.jsx(J,{className:"mr-2"}),e.jsx("span",{className:"text-xs",children:"Import"})]})})]}),E&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full my-2 lg:my-0 md:my-0 flex",children:[e.jsx("div",{className:"h-10 border border-dashed border-green-500 rounded-md",children:e.jsxs("label",{className:"w-full rounded-lg h-10 flex justify-center items-center text-xs dark:text-gray-400 leading-none",children:[e.jsx(p.Input,{disabled:j,type:"file",accept:".csv,.xls,.json",onChange:N}),x||e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"mx-2 text-green-500 text-lg dark:text-gray-400"})," ",m("SelectYourJSON")," ",n," ",m("File")]}),x&&e.jsx("span",{onClick:b,type:"button",className:"text-red-500 focus:outline-none mx-4 text-lg",children:e.jsx(A,{})})]})}),e.jsx("div",{className:"flex",children:w?e.jsxs(p.Button,{className:"ml-2 h-10",children:[e.jsx("img",{src:M,alt:"Loading",width:20,height:10})," ",e.jsx("span",{className:"font-serif ml-2 font-light",children:"Processing"})]}):e.jsxs(p.Button,{onClick:v,className:"w-full rounded-md h-10 ml-2  text-xs px-2",children:[e.jsx("span",{className:"",children:e.jsx(V,{})}),e.jsx("span",{className:" text-sx w-20",children:m("ImportNow")})]})})]})})]})};export{K as U};
